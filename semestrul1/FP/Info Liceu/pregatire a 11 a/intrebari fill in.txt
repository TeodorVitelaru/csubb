#2244
#include <bits/stdc++.h>

using namespace std;

ifstream fin ("traseucalmax.in");
ofstream fout ("traseucalmax.out");
int a[11][11], n, m, cnt=0;
const int dic[]={-2, -2, -1, -1, 1, 1, -2, -2};
const int djc[]={1, -1, -2, 2, 2, -2, -1, 1};
void citire()
{
    cin>>n>>m;
    for(int i=1; i<=n; i++)
        for(int j=1; j<=m; j++)
            {
                cin>>a[i][j];
                a[i][j]=-a[i][j];
            }
}
void afisare()
{
    cnt++;
    for(int i=1; i<=n; i++)
    {
        for(int j=1; j<=m; j++)
            if(a[i][j]==-1)
                {
                    cout<<0<<" ";
                }
            else
                {
                    cout<<a[i][j]<<" ";
                }

        cout<<endl;
    }
}
void Back(int i, int j, int pas)
{
    for(int d=1; d<=8; d++)
    {
        int inou=i+dic[d];
        int jnou=j+djc[d];
        if( inou<=n && inou>=1 && jnou<=m && jnou>=1 && a[inou][jnou]==0)
        {
            a[inou][jnou]=pas;
            if(inou==n && jnou==m) {afisare(); return;}
            else Back(inou, jnou, pas+1);
            a[inou][jnou]=0;
        }
    }
}
int main()
{
   citire();
   a[1][1]=1;
   Back(1, 1, 2);
   if(cnt==0)
   {
       for(int i=1; i<=-n; i++)
       {
           for(int j=1; j<=m; j++)
              cout<<0<<" ";
          cout<<endl;
       }

   }
    return 0;
}







#4011
#include <bits/stdc++.h>
using namespace std;
int a[21][21], n, cnt=0, maxi;
const int di[]={1, 1, -1, -1};
const int dj[]={-1, 1, -1, 1};
void citire()
{
    cin>>n;
    for(int i=1; i<=n; i++)
        for(int j=1; j<=n; j++)
          cin>>a[i][j];
}
int inside(int i, int j)
{
    return i>=1 && 1<=n && j>=1 && j<=n;
}
void Back (int i, int j, int pas)
{
    for(int d=1; d<=4; d++)
    {
        int inou=i+di[d];
        if(inside(inou, jnou) && a[inou][jnou]==0)
        {
        int jnou=j+dj[d];
            a[inou][jnou]=pas;
            if(inou==n && jnou==n) {cnt++; maxi=max(maxi, pas); pas=1; }
            else Back(inou, jnou, pas+1);
            a[inou][jnou]=0;

        }
    }
}

int main ()
{
    citire();
    a[1][1]=1;
    Back(1, 1, 2);
    cout<<cnt;
    cout<<maxi;
}






#329
#include <bits/stdc++.h>

using namespace std;
ifstream fin("bila.in");
ofstream fout("bila.out");
int a[21][21], n, m, cnt, istart, pas=1, jstart, maxi, b[21][21];
const int dib[]={-1, 1, 0, 0};
const int djb[]={0, 0, -1, 1};
void citire()
{
    fin>>n>>m;
    for(int i=1; i<=n; i++)
        for(int j=1; j<=m; j++)
          fin>>a[i][j];
    fin>>istart>>jstart;
    for(int j=0; j<=m+1; j++)
        a[0][j]=a[n+1][j]=0;
    for(int i=0; i<=n+1; i++)
        a[i][0]=a[i][m+1]=0;
}

void Back(int i, int j, int pas)
{
    for(int d=1; d<=4; d++)
    {
        int inou=i+dib[d];
        int jnou=j+djb[d];
        if(inou<=n && inou>=1 && jnou<=m && jnou>=1 && a[i][j]>a[inou][jnou] && b[inou][jnou]==0)
        {
	        b[inou][jnou]=pas;
            if(a[inou-1][jnou]==0 || a[inou][jnou+1]==0 || a[inou+1][jnou]==0 || a[inou][jnou-1]==0)
                {
                    maxi=max(maxi,pas);
                    
                }
              else
                {
                    pas++;
                    Back(inou, jnou, pas+1);
                }
             b[inou][jnou]=0;
        }
    }

}
int main()
{
    citire();
    b[istart][jstart]=1;
    Back(istart, jstart, 2);
    cout<<maxi;

    return 0;
}